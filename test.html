<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

<style>
.form{
    text-align: center;
    float: left;
    margin: 0px 50px 10px 200px;
}
.collapsible {
  background-color: #777;
  color: white;
  cursor: pointer;
  padding: 15px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.active, .collapsible:hover {
  background-color: #555;
}

.content {
  padding: 0 18px;
  display: none;
  overflow: hidden;
  background-color: #f1f1f1;
}
.list{
    width: 300px;
    float: right;
}
</style>

</head>
<body>
<div>
<div class = "list">
        <h2>Machine Groups</h2>
        <button type="button" class="collapsible">Open Group</button>
        <div class="content">
                <button type="button" class="collapsible">group 1</button>
                <div class="content">
                  <p>Machine 1 : 192.168.18.54</p>
                  <p>Machine 2 : 192.168.18.49</p>
                  <p>Machine 3 : 192.168.18.37</p>
                  <p>Machine 4 : 192.168.18.42</p>
                  <p>Machine 5 : 192.168.18.40</p>
                </div> 
                <button type="button" class="collapsible">group 2</button>
                <div class="content">
                  <p>Machine 1 : 192.168.18.54</p>
                  <p>Machine 2 : 192.168.18.49</p>
                  <p>Machine 3 : 192.168.18.37</p>
                  <p>Machine 4 : 192.168.18.42</p>
                  <p>Machine 5 : 192.168.18.40</p>
                </div> 
                <button type="button" class="collapsible">group 3</button>
                <div class="content">
                  <p>Machine 1 : 192.168.18.54</p>
                  <p>Machine 2 : 192.168.18.49</p>
                  <p>Machine 3 : 192.168.18.37</p>
                  <p>Machine 4 : 192.168.18.42</p>
                  <p>Machine 5 : 192.168.18.40</p>
                </div> 
                <button type="button" class="collapsible">group 4</button>
                <div class="content">
                  <p>Machine 1 : 192.168.18.54</p>
                  <p>Machine 2 : 192.168.18.49</p>
                  <p>Machine 3 : 192.168.18.37</p>
                  <p>Machine 4 : 192.168.18.42</p>
                  <p>Machine 5 : 192.168.18.40</p>
                </div> 
                
            </div>
        
       
</div>



<div  class="form">
<!-- select a machine -->
<div>
    <h2>Machine Address</h2>
    <label>machine 1 </label>
    <input type="text" id="m1" >
    <div  id="parentDiv"></div>
    <br/>
    <button onclick = "newName()">  Add other Machines</button>
    <p>OR </p>
    <select name="" id="group">
        <option value="none" selected disabled hidden>  Select an group </option>
        <option value="group1">group1</option>
        <option value="group2">group2</option>
        <option value="group3">group3</option>
        <option value="group4">group4</option>
    </select>
</div>
<!-- user machine input -->
<div>
<form onsubmit="req(event)" >
    <h1>Enter your time</h1>
    <h2>hour</h2>
    <input type="number" id="hour" >
    <h2>mintue</h2>
    <input type="number" id="min" >
    <br>
    <button type="submit">Set Time</button>
</form>
</div>
</div>


</div>
<script>
    var x = 1;
    var newid=["m1"];
    function newName(event) {
        x = x+1;
        var broke = document.createElement("br");
        var label = document.createElement("label");
        label.textContent="machine "+x;
        var input = document.createElement("input");
        input.setAttribute('type', 'text');
        input.setAttribute('id', 'm'+x.toString());
newid.push( 'm'+x.toString());
        var parent = document.getElementById("parentDiv");
        parent.appendChild(label);
        parent.appendChild(input);
        parent.appendChild(broke);
       
    }
</script>

<script>
function req(event) {
var group1 =["192.168.18.54","192.168.18.49","192.168.18.44","192.168.18.52","192.168.18.47"];
var grp = document.getElementById("group").value;


var hour = document.getElementById("hour").value;
var min =  document.getElementById("min").value;
// console.log(document.getElementById("m1").value);
// console.log(document.getElementById("m2").value);
// let requestURL = 'http://'+ip+'/toggle?hour='+hour+'&min='+min; 

// newid.forEach(element => {
//     let requestURL = 'http://'+document.getElementById(element).value+'/toggle?hour='+hour+'&min='+min; 
//     let request = new XMLHttpRequest();
//     request.open('GET', requestURL);
//     request.send();
//     console.log(document.getElementById(element).value);  
// });


// console.log(grp);
// console.log(typeof(grp));


if (grp === "group1") {
    group1.forEach(element => {
    let requestURL = 'http://'+element+'/toggle?hour='+hour+'&min='+min; 
    let request = new XMLHttpRequest();
    request.open('GET', requestURL);
    request.send();
    console.log(element);  
});
 
}

// let request = new XMLHttpRequest();
//     request.open('GET', requestURL);
//     request.responseType = 'json';
//     request.send();
// console.log(newid);  
event.preventDefault();

}

</script>

<script>
        var coll = document.getElementsByClassName("collapsible");
        var i;
        
        for (i = 0; i < coll.length; i++) {
          coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
              content.style.display = "none";
            } else {
              content.style.display = "block";
            }
          });
        }
        </script>


</body>
</html>